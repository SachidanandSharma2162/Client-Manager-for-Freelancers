<%- layout('layouts/boilerplate') -%>

<body class="bg-light">

  <div class="container mt-5">

    <!-- User Profile Section -->
    <!-- User Profile Section -->
<div class="card shadow-lg border-0 mb-5 rounded-4">
  <div class="card-header text-white d-flex align-items-center" style="background: linear-gradient(90deg, #6a11cb, #2575fc); border: none;">
    <div class="d-flex align-items-center">
      <% if (user.picture && user.picture.data) { %>
        <img src="data:<%= user.picture.contentType %>;base64,<%= user.picture.data.toString('base64') %>" 
             alt="Profile Picture" 
             class="rounded-circle border border-white shadow-sm me-3" 
             style="width: 80px; height: 80px; object-fit: cover;">
      <% } else { %>
        <img src="https://via.placeholder.com/80" 
             alt="Profile Picture" 
             class="rounded-circle border border-white shadow-sm me-3" 
             style="width: 80px; height: 80px; object-fit: cover;">
      <% } %>

      <div>
        <h4 class="mb-1 fw-bold text-white"><%= user.fullName %></h4>
        <span class="badge bg-light text-dark text-capitalize"><%= user.role %></span>
      </div>
    </div>
  </div>

  <div class="card-body bg-light rounded-bottom">
    <div class="row mb-3">
      <div class="col-md-6">
        <p class="mb-2"><i class="bi bi-envelope-fill me-2 text-primary"></i><strong>Email:</strong> <%= user.email %></p>
      </div>
      <div class="col-md-6">
        <p class="mb-2"><i class="bi bi-telephone-fill me-2 text-success"></i><strong>Phone:</strong> <%= user.phoneNumber %></p>
      </div>
    </div>

    <div class="text-end">
      <a href="/users/edit-profile" class="btn btn-outline-primary fw-semibold px-4">
        ‚úèÔ∏è Edit Profile
      </a>
    </div>
  </div>
</div>


    <!-- Clients Section -->
<div class="card shadow-lg border-0 mb-5">
  <div class="card-header text-white text-center fw-bold" style="background: linear-gradient(90deg, #00c6ff, #0072ff);">
    <h4 class="mb-0">üë• My Clients</h4>
  </div>
  <div class="card-body bg-light">
    <% if (user.clients.length === 0) { %>
      <p class="text-center text-muted fst-italic">No clients assigned yet.</p>
    <% } else { %>
      <div class="row g-4">
        <% user.clients.forEach(client => { %>
          <div class="col-md-6 col-lg-4">
            <div class="card h-100 border-0 shadow-sm rounded-4" style="background: linear-gradient(135deg, #f5f7fa, #c3cfe2);">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <div class="avatar bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 50px; height: 50px; font-size: 1.2rem;">
                    <%= client.name[0] %>
                  </div>
                  <h5 class="card-title mb-0 text-primary fw-semibold"><%= client.name %></h5>
                </div>
                <p class="mb-1"><i class="bi bi-envelope-fill text-primary me-1"></i><strong>Email:</strong> <%= client.email %></p>
                <% if(client.phoneNumber) { %>
                  <p class="mb-1"><i class="bi bi-telephone-fill text-success me-1"></i><strong>Phone:</strong> <%= client.phoneNumber %></p>
                <% } %>
                <% if(client.company) { %>
                  <p class="mb-0"><i class="bi bi-building text-warning me-1"></i><strong>Company:</strong> <%= client.company %></p>
                <% } %>
              </div>
            </div>
          </div>
        <% }); %>
      </div>
    <% } %>
  </div>
</div>


  </div>

</body>
